name: 'YOLO Detection Alert'
on:
  webhook:
    path: /yolo_alert
    secret: ${{ secrets.WEBHOOK_SECRET }}
jobs:
  alert:
    name: Send Email
    runs-on: ubuntu-latest
    steps:
      - name: Send Email via Sina Mail
        uses: dawidd6/action-send-mail@v3
        with:
          # ä½¿ç”¨æ–°æµªé‚®ç®±çš„SMTPæœåŠ¡å™¨
          server_address: smtp.sina.com.cn
          server_port: 465
          secure: true
          # ä½¿ç”¨Secretsä¸­çš„æ–°æµªé‚®ç®±å’Œæˆæƒç 
          username: ${{ secrets.SINA_MAIL }}
          password: ${{ secrets.SINA_AUTH_CODE }}
          subject: 'ğŸš¨ å‘ç°ç›®æ ‡: ${{ github.event.trigger.payload.object }}'
          body: |
            æ‚¨çš„ç›‘æ§ç³»ç»Ÿå‘ç°äº†ç›®æ ‡ï¼

            - **ç›®æ ‡ç±»å‹:** ${{ github.event.trigger.payload.object }}
            - **ç½®ä¿¡åº¦:** ${{ github.event.trigger.payload.confidence }}
            - **æ—¶é—´:** ${{ github.event.trigger.payload.time }}

            è¯·åŠæ—¶å¤„ç†ã€‚
          to: ä½ çš„ä¸ªäººé‚®ç®±@xxx.com  # ã€é‡è¦ã€‘æ”¹æˆä½ çš„ä¸ªäººæ”¶ä»¶é‚®ç®±ï¼Œæ¯”å¦‚ 12345@gmail.com
          from: YOLOç›‘æ§åŠ©æ‰‹ <${{ secrets.SINA_MAIL }}> # å‘ä»¶äººæ˜¾ç¤º
