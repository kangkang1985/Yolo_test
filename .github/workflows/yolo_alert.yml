name: 'YOLO Detection Alert'
on:
  webhook:
    path: /yolo_alert
    secret: ${{ secrets.WEBHOOK_SECRET }}
jobs:
  alert:
    name: Send Email
    runs-on: ubuntu-latest
    steps:
      - name: Send Email via Sina Mail
        uses: dawidd6/action-send-mail@v3
        with:
          # 使用新浪邮箱的SMTP服务器
          server_address: smtp.sina.com.cn
          server_port: 465
          secure: true
          # 使用Secrets中的新浪邮箱和授权码
          username: ${{ secrets.SINA_MAIL }}
          password: ${{ secrets.SINA_AUTH_CODE }}
          subject: '🚨 发现目标: ${{ github.event.trigger.payload.object }}'
          body: |
            您的监控系统发现了目标！

            - **目标类型:** ${{ github.event.trigger.payload.object }}
            - **置信度:** ${{ github.event.trigger.payload.confidence }}
            - **时间:** ${{ github.event.trigger.payload.time }}

            请及时处理。
          to: 你的个人邮箱@xxx.com  # 【重要】改成你的个人收件邮箱，比如 12345@gmail.com
          from: YOLO监控助手 <${{ secrets.SINA_MAIL }}> # 发件人显示
